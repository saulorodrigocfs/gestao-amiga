{% extends 'base.html' %}
{% block content %}
<h2>Dashboard de {{ loja.nome }}</h2>
<p>Bem-vindo ao painel da sua loja, {{ user.first_name }}!</p>

<div class="dashboard-sections">
    <!--Resumo financeiro-->
    <div class="section resumo-financeiro">
        <h3>Resumo financeiro</h3>
        <p>Saldo atual do caixa: R$ {{ saldo_atual | floatformat:2 }}</p>
        <p>Total de receitas: R$ {{ total_receitas | floatformat:2 }}</p>
        <p>Total de despesas: R$ {{ total_despesas | floatformat:2 }}</p>
    </div>

    <!--Últimas vendas-->
    <div class="section ultimas-vendas">
        <h3>Últimas Vendas</h3>
        <ul>
            {% for venda in ultimas_vendas %}
                <li>{{ venda.produto.nome }} - {{ venda.quantidade }} un. - R$ {{ venda.valor_total | floatformat:2 }}</li>
            {% empty %}
                <li>Nenhuma venda registrada</li>
            {% endfor %}
        </ul>
    </div>
        
    <!--Despesas recentes-->
    <div class="section despesas-recentes">
        <h3>Despesas Recentes</h3>
        <ul>
            {% for despesa in despesas_recentes %}
                <li>{{ despesa.descricao }} - R$ {{ despesa.valor | floatformat:2 }}</li>
            {% empty %}
                <li>Nenhuma despesa registrada</li>
            {% endfor %}
        </ul>
    </div>

    <!--Atalhos para cadastros-->
    <div class="section atalhos-cadastros">
        <h3>Atalhos</h3>
        <a href="{% url 'lista_produtos' loja.id %}" class="btn">Produtos</a>
        <a href="{% url 'lista_clientes' loja_id=loja.id %}" class="btn">Clientes</a>
        <a href="{% url 'lista_fornecedores' loja_id=loja.id %}" class="btn">Fornecedores</a>
        <a href="{% url 'lista_vendas' loja.id %}" class="btn">Vendas</a>
        <a href="{% url 'lista_despesas' loja.id %}" class="btn">Despesas</a>
        <a href="{% url 'relatorio_lucros' loja_id=loja.id %}" class="btn">Relatório de Lucros</a>
    </div>
</div>


<a href="{% url 'painel_loja' %}">Voltar para Painel de Lojas</a>
{% endblock %}
